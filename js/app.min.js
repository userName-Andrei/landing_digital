(()=>{"use strict";getComputedStyle(document.querySelector(".burger-menu")).width;const e=e=>{let t=document.querySelector(e),o=window.innerWidth-document.documentElement.clientWidth;document.body.style.overflow="hidden",document.body.style.paddingRight=o+"px",document.querySelector(".navigation").style.paddingRight=o+"px",t.classList.add("show"),t.classList.contains("hide")&&t.classList.remove("hide")},t=e=>{let t=document.querySelector(e);document.body.style.overflow="",document.body.style.paddingRight="0px",document.querySelector(".navigation").style.paddingRight="0px",t.classList.contains("show")&&(t.classList.remove("show"),t.classList.add("hide"))},o=({forms:o,choose:n})=>{let r=document.querySelectorAll(o),l=document.querySelectorAll(n),c=document.querySelectorAll('input[name="offer"]');function d(e){c.forEach((t=>{-1===t.value.indexOf(e)?t.value+=e+" ":t.value=t.value.split(" ").filter((t=>t!=e)).join(" ")}))}function a(o,n){let r=document.querySelector(".modal__dialog"),l=document.createElement("div");r.classList.add("hide"),l.classList.add("modal__dialog"),l.innerHTML=`\n                <div class="modal__content">\n                    <div data-modal-close="" class="modal__close">×</div>\n                    <div class="modal__thanks">\n                        ${n?'<div class="modal__img"><img src="img/icons/success.png"></div>\n                        <div class="modal__title bold">Успешно оформлено!</div>':""}\n                        <div style="text-align:center; line-height:1.5">${o}</div>\n                    </div>\n                </div>\n        `,document.querySelector(".modal").append(l),e(".modal"),setTimeout((()=>{l.remove(),r.classList.remove("hide"),r.classList.add("show"),t(".modal")}),5e3)}l.forEach((e=>{e.addEventListener("click",(t=>{t.target&&(e.classList.contains("active")?(document.querySelectorAll(`[data-offer="${e.dataset.offer}"]`).forEach((e=>e.classList.remove("active"))),d(e.dataset.offer)):(document.querySelectorAll(`[data-offer="${e.dataset.offer}"]`).forEach((e=>e.classList.add("active"))),d(e.dataset.offer)))}))})),r.forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault(),function(e){let t=new FormData(e),o=JSON.stringify(Object.fromEntries(t.entries())),n=document.createElement("img"),r=document.createElement("div");n.src="img/icons/spinner.svg",r.classList.add("spinner"),r.append(n),document.body.append(r),(async({url:e,body:t,method:o})=>{if("POST"==o){let n=await fetch(e,{headers:{"Content-type":"application/json"},body:t,method:o});if(!n.ok)throw new Error(`Could not fetch ${e}, status ${res.status}`);return await n.json()}{let t=await fetch(e);if(!t.ok)throw new Error(`Could not fetch ${e}, status ${res.status}`);return await t.json()}})({url:"http://localhost:3000/orders",body:o,method:"POST"}).then((e=>{r.remove(),a("Ваш заказ успешно оформлен! Спасибо что выбрали именно нас.",!0)})).catch((()=>{r.remove(),a("Что-то пошло не так...",!1)})).finally((()=>{e.reset()}))}(e)}))}))},n=()=>{!function(e){let t=new Image;t.onload=t.onerror=function(){1==(2==t.height)?document.querySelector("html").classList.add("webp"):document.querySelector("html").classList.add("no-webp")},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}()};window.addEventListener("DOMContentLoaded",(()=>{(({btnOpen:e,burgerMenu:t,btnClose:o})=>{let n=document.querySelector(e),r=document.querySelector(t),l=document.querySelector(o);n.addEventListener("click",(e=>{r.style.right=0})),l.addEventListener("click",(e=>{r.style.right=`-${getComputedStyle(r).width}`}))})({btnOpen:".burger-btn_open",burgerMenu:".burger-menu",btnClose:".burger-btn_close"}),(({triggerSelector:o,modalSelector:n})=>{let r=document.querySelector(n);document.querySelectorAll(o).forEach((t=>t.addEventListener("click",(()=>e(n))))),r.addEventListener("click",(e=>{(e.target.classList.contains("modal__close")||e.target===r)&&t(n)}))})({modalSelector:".modal",triggerSelector:".modal-open"}),o({forms:'form[name="order"]',choose:"[data-offer]"}),(({slideSelector:e,containerSelector:t,dotWrap:o,dotSelector:n})=>{let r=document.querySelectorAll(e),l=0,c=!1;function d(e,t){document.querySelectorAll(e).forEach(((e,o)=>{e.classList.remove("active"),o==t&&e.classList.add("active")}))}function a(e){e<r.length&&r.forEach(((t,o)=>{o==e&&(r.forEach((e=>{e.classList.contains("active")&&e.classList.remove("active")})),t.classList.add("active"))}))}!function(e,t){let o=document.querySelector(e);r.forEach(((e,n)=>{let r=document.createElement("span");r.classList.add(t.slice(1)),n==l&&r.classList.add("active"),o.append(r)}))}(o,n),function(e){document.querySelectorAll(e).forEach(((t,o)=>{t.addEventListener("click",(n=>{n.target==t&&(l=o,d(e,l),a(o))})),t.addEventListener("mouseover",(()=>{c=!0})),t.addEventListener("mouseout",(()=>{c=!1}))}))}(n),function(e){let t=document.querySelector(e);t.addEventListener("mouseover",(()=>{c=!0})),t.addEventListener("mouseout",(()=>{c=!1}))}(t),a(l),window.setInterval((()=>{c||(l+1<r.length?l++:l=0,d(n,l),a(l))}),3e3)})({slideSelector:".slider__item",containerSelector:".slider-container",dotWrap:".slider__dots",dotSelector:".dot"}),(({triggerSelector:e,elementsSelector:t})=>{let o=document.querySelectorAll(e),n=document.querySelectorAll(t);o.forEach(((e,t)=>{n.forEach(((o,n)=>{t==n&&e.setAttribute("data-height-label",o.getBoundingClientRect().top+window.pageYOffset)}))})),o.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),e.target&&window.scrollTo({top:e.target.dataset.heightLabel,behavior:"smooth"})}))}))})({triggerSelector:".shift-trigger",elementsSelector:".shift-element"}),n()}))})();